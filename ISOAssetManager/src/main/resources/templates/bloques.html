<!DOCTYPE html>
<!-- Namespace de Thymeleaf y Spring Security -->
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title>Evaluar ISO</title>
    <link rel="stylesheet" href="/bloques.css">
</head>

<body>
    <div class="container">
        <!-- Título con el nombre de la empresa -->
        <h1>Evaluar ISO - <span th:text="${empresa.nombre}"></span></h1>

        <!-- Enlace de retorno -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <a href="/empresas" class="back-link">← Volver a empresas</a>
        </div>

        <!-- Grid de bloques de controles por departamento -->
        <div class="bloques">

            <!-- BLOQUE ORGANIZACIONALES -->
            <!-- Visible y enlazado para: ADMIN, AUDITOR, DIRECCION -->
            <a sec:authorize="hasAnyRole('ADMIN','AUDITOR','DIRECCION')"
                th:href="@{/empresas/{id}/cuestionario/grupo/organizacionales(id=${empresa.id})}" class="bloque">
                <h2>Controles organizacionales</h2>
                <p>Anexo A.5</p>
            </a>
            <!-- Deshabilitado visualmente para otros roles -->
            <a sec:authorize="!hasAnyRole('ADMIN','AUDITOR','DIRECCION')" class="bloque bloque--disabled">
                <h2>Controles organizacionales</h2>
                <p>Anexo A.5</p>
            </a>

            <!-- BLOQUE PERSONAS -->
            <!-- Visible y enlazado para: ADMIN, AUDITOR, RRHH -->
            <a sec:authorize="hasAnyRole('ADMIN','AUDITOR','RRHH')"
                th:href="@{/empresas/{id}/cuestionario/grupo/personas(id=${empresa.id})}" class="bloque">
                <h2>Controles de personas</h2>
                <p>Anexo A.6</p>
            </a>
            <!-- Deshabilitado para otros roles -->
            <a sec:authorize="!hasAnyRole('ADMIN','AUDITOR','RRHH')" class="bloque bloque--disabled">
                <h2>Controles de personas</h2>
                <p>Anexo A.6</p>
            </a>

            <!-- BLOQUE FÍSICOS -->
            <!-- Visible y enlazado para: ADMIN, AUDITOR, FACILITIES -->
            <a sec:authorize="hasAnyRole('ADMIN','AUDITOR','FACILITIES')"
                th:href="@{/empresas/{id}/cuestionario/grupo/fisicos(id=${empresa.id})}" class="bloque">
                <h2>Controles físicos</h2>
                <p>Anexo A.7</p>
            </a>
            <!-- Deshabilitado para otros roles -->
            <a sec:authorize="!hasAnyRole('ADMIN','AUDITOR','FACILITIES')" class="bloque bloque--disabled">
                <h2>Controles físicos</h2>
                <p>Anexo A.7</p>
            </a>

            <!-- BLOQUE TECNOLÓGICOS -->
            <!-- Visible y enlazado para: ADMIN, AUDITOR, IT/TECNICO -->
            <a sec:authorize="hasAnyRole('ADMIN','AUDITOR','IT/TECNICO')"
                th:href="@{/empresas/{id}/cuestionario/grupo/tecnologicos(id=${empresa.id})}" class="bloque">
                <h2>Controles tecnológicos</h2>
                <p>Anexo A.8</p>
            </a>
            <!-- Deshabilitado para otros roles -->
            <a sec:authorize="!hasAnyRole('ADMIN','AUDITOR','IT/TECNICO')" class="bloque bloque--disabled">
                <h2>Controles tecnológicos</h2>
                <p>Anexo A.8</p>
            </a>

        </div>

    </div>
    </div>
</body>

</html>